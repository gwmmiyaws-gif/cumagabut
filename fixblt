local WindUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/Footagesus/WindUI/main/dist/main.lua"))()

local svc = {
    Players = game:GetService("Players"),
    RS = game:GetService("ReplicatedStorage"),
}

local player = svc.Players.LocalPlayer

repeat task.wait() until player.Character
local character = player.Character
local hrp = character:WaitForChild("HumanoidRootPart")

task.wait(1)

local Net = svc.RS:FindFirstChild("Packages")
if not Net then warn("Packages not found") return end
Net = Net:FindFirstChild("_Index")
if not Net then warn("_Index not found") return end
Net = Net:FindFirstChild("sleitnick_net@0.2.0")
if not Net then warn("sleitnick_net not found") return end
Net = Net:FindFirstChild("net")
if not Net then warn("net not found") return end

local Window = WindUI:CreateWindow({
    Title = "LS Hub - Fish It",
    Author = "developed by Louissxe",
    Folder = "LSHub-FishIt",
    Icon = "rbxassetid://129609617845057",
    Transparent = true,
    IconSize = 24,
    NewElements = true,
    Size = UDim2.fromOffset(500, 400),
    ToggleKey = Enum.KeyCode.G,
    User = {
        Enabled = true,
        Anonymous = true,
    },
    HideSearchBar = true,
})

local Fish10 = Window:Tab({
    Title = "Fishing",
    Icon = "bird",
})

local Running = false
local CatchIndex = 1

_G.DelayComplete = 0
_G.DelayCycle = 0.5

Fish10:Input({
    Title = "Delay Complete",
    Description = "Delay spam charge+start",
    Value = "0",
    Callback = function(v)
        _G.DelayComplete = tonumber(v) or 0
    end,
})

Fish10:Input({
    Title = "Delay Cycle", 
    Description = "Delay sebelum catch/cancel",
    Value = "0.5",
    Callback = function(v)
        _G.DelayCycle = tonumber(v) or 0.5
    end,
})

Fish10:Toggle({
    Title = "Auto Fish",
    Default = false,
    Callback = function(s)
        Running = s
        
        if s then
            task.spawn(function()
                local EquipTool = Net:FindFirstChild("RE/EquipToolFromHotbar")
                local ChargeRod = Net:FindFirstChild("RF/ChargeFishingRod")
                local StartMini = Net:FindFirstChild("RF/RequestFishingMinigameStarted")
                local CatchFish = Net:FindFirstChild("RF/CatchFishCompleted")
                local CancelFish = Net:FindFirstChild("RF/CancelFishingInputs")
                
                if EquipTool then
                    pcall(function() EquipTool:FireServer(1) end)
                    task.wait(0.5)
                end
                
                while Running do
                    local startTime = tick()
                    
                    while (tick() - startTime) < _G.DelayCycle and Running do
                        if ChargeRod then
                            task.spawn(function()
                                pcall(function()
                                    ChargeRod:InvokeServer(workspace:GetServerTimeNow())
                                end)
                            end)
                        end
                        
                        if StartMini then
                            task.spawn(function()
                                pcall(function()
                                    StartMini:InvokeServer(-1, 1, workspace:GetServerTimeNow())
                                end)
                            end)
                        end
                        
                        if _G.DelayComplete > 0 then 
                            task.wait(_G.DelayComplete) 
                        else
                            task.wait()
                        end
                    end
                    
                    if CatchIndex % 2 == 1 then
                        if CatchFish then
                            pcall(function()
                                CatchFish:InvokeServer()
                            end)
                        end
                    else
                        if CancelFish then
                            pcall(function()
                                CancelFish:InvokeServer()
                            end)
                        end
                    end
                    
                    CatchIndex = CatchIndex + 1
                    
                    task.wait(0.05)
                end
            end)
        end
    end,
})

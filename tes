local WindUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/Footagesus/WindUI/main/dist/main.lua"))()

local svc = {
    RS = game:GetService("ReplicatedStorage"),
}

local mods = {
    Net = svc.RS.Packages._Index["sleitnick_net@0.2.0"].net,
}

local api = {
    Functions = {
        ChargeRod = mods.Net["RF/ChargeFishingRod"],
        StartMini = mods.Net["RF/RequestFishingMinigameStarted"],
        CatchFish = mods.Net["RF/CatchFishCompleted"],
        CancelFish = mods.Net["RF/CancelFishingInputs"],
    },
}

local Window = WindUI:CreateWindow({
    Title = "Auto Fish",
    Author = "Patungin",
    Folder = "AutoFish",
    Size = UDim2.fromOffset(400, 300),
    ToggleKey = Enum.KeyCode.G,
})

local Main = Window:Tab({
    Title = "Main",
    Icon = "fish",
})

local Running = false
_G.DelayComplete = 0.01
_G.DelayCycle = 0.1
_G.SpamCount = 50

local function AutoFish()
    while Running do
        pcall(function()
            -- SPAM PHASE - spam ChargeRod + StartMini
            for i = 1, _G.SpamCount do
                local now = workspace:GetServerTimeNow()
                
                pcall(function()
                    api.Functions.ChargeRod:InvokeServer(now + (i * 0.000001))
                end)
                
                pcall(function()
                    api.Functions.StartMini:InvokeServer(-1, 1, now + (i * 0.000001))
                end)
                
                task.wait(_G.DelayComplete)
            end
            
            -- Catch + Cancel pattern
            api.Functions.CatchFish:InvokeServer()
            task.wait(_G.DelayComplete)
            
            api.Functions.CancelFish:InvokeServer()
            
            task.wait(_G.DelayCycle)
        end)
    end
end

Main:Toggle({
    Title = "Start Auto Fish",
    Default = false,
    Callback = function(state)
        Running = state
        if state then
            task.spawn(AutoFish)
        end
    end,
})

Main:Input({
    Title = "Delay Complete",
    Description = "Delay antara spam (detik)",
    Value = "0.01",
    Callback = function(v)
        local n = tonumber(v)
        if n and n >= 0.001 then
            _G.DelayComplete = n
        end
    end,
})

Main:Input({
    Title = "Delay Cycle",
    Description = "Delay per cycle (detik)",
    Value = "0.1",
    Callback = function(v)
        local n = tonumber(v)
        if n and n >= 0 then
            _G.DelayCycle = n
        end
    end,
})

Main:Input({
    Title = "Spam Count",
    Description = "Jumlah spam per cycle",
    Value = "50",
    Callback = function(v)
        local n = tonumber(v)
        if n and n > 0 then
            _G.SpamCount = n
        end
    end,
})

print("ğŸ£ Auto Fish Loaded!")
